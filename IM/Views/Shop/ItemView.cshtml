@inject UserManager<ApplicationUser> UserManager
@inject IProductService productService
@model IM.Models.ViewModel.ProductViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var user = await UserManager.GetUserAsync(User);
    var shoppingCart = await productService.GetShoppingCartAsync(user.Id);
}

<br />
<br />

@using (Html.BeginForm())
{
    <input type="text" readonly hidden value="@Model.Id" name="ProductId">

    @if (shoppingCart != null)
    {
        <input type="text" readonly hidden value="@shoppingCart.Id" name="ShoppingCartId">
    }

    <!-- Main content -->
    <div class="container">
        <section class="content">

            <!-- Default box -->
            <div class="card card-solid">
                <div class="card-body">
                    <div class="row">

                        <div class="col-12 col-sm-6">
                            <div class="col-12">
                                <img src="/img/1997 Rudina/1997 Rudina 11.jpg" class="img-fluid" alt="Product Image">
                            </div>
                        </div>

                        <div class="col-11 col-sm-6">
                            <br />
                            <h1 align="center">@Model.Title</h1>
                            <h5 align="center">Tomisalv Wittenberg</h5>
                            <hr />
                            <p>@Model.Description</p>
                            <hr />

                            <div class="d-flex justify-content-between">
                                <div>
                                    <p align="left">Category: <b>@Model.ProductCategory.Title</b></p>
                                    <p align="left">Still left: <b>@Model.Quantity</b></p>
                                </div>
                                <div>
                                    <div align="right">
                                        <a href="#" class="text-gray"><i class="fab fa-facebook-square"></i></a>
                                        <a href="#" class="text-gray"><i class="fab fa-instagram-square"></i></a>
                                        <a href="#" class="text-gray"><i class="fas fa-envelope-square"></i></a>
                                        <a href="#" class="text-gray"><i class="fas fa-rss-square"></i></a>
                                    </div>
                                </div>
                            </div>
                            
                            <h1 align="center" class="mb-0">@string.Format("{0:C}",Model.Price)<sub style="color:grey"><s> @string.Format("{0:C}",Model.Price)</s></sub></h1>
                            
                            @*@Html.TextBoxFor(model => model.Price,new {@readonly = true, @class = "form-control readonly hidden"})*@
                            <input type="text" readonly hidden value="@Model.Price" name="Price">
                            <br />

                            <dt class="col-sm-3 offset-1">Quantity</dt>
                            <dd class="col-sm-3 offset-1">
                                <select name="Quantity" class="form-select" aria-label="Default select example">
                                    @for (int i = 1; i <= Model.Quantity; i++)
                                    {
                                        <option value="@i">
                                            @i
                                        </option>
                                    }
                                </select>
                            </dd>

                            <div class="col-sm-10 offset-1">
                                <input type="submit" value="Add to Cart" class="btn btn-primary btn-lg btn-flat">
                                @*<div class="btn btn-primary btn-lg btn-flat"><a asp-route-id="@Model.Id" asp-controller="Shop" asp-action="ShoppingCart"><i class="fas fa-cart-plus fa-lg mr-2"></i> Add to Cart</a></div>*@
                                <div class="btn btn-default btn-lg btn-flat"><i class="fas fa-heart fa-lg mr-2"></i> Add to Wishlist</div>
                                <div class="btn btn-default btn-lg btn-flat"><a asp-controller="Shop" asp-action="Index">Back</a></div>
                            </div>
                        </div>
                    </div>

                    <br />
                    <br />








                    <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">

                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">DESCRIPTION</button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">ADDITIONAL INFORMATION</button>
                        </li>

                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">TOMISLAV WITTENBERG</button>
                        </li>


                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                            <br />
                            <br />
                            <h1 align="center">@Model.Title</h1>
                            <br />
                            <br />
                            @Model.Description
                            <br />
                            <br />
                        </div>
                        <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                            <br />
                            <br />
                            <div class="container-sm text-center" style="max-width: 500px;">
                                <table class="table">
                                    <tbody>
                                        <tr><th scope="row">Kategorija</th><td>Model.BookCategory</td></tr>
                                        <tr><th scope="row">Uvez</th><td>Model.BookBinding</td></tr>
                                        <tr><th scope="row">Nakladnik</th><td>Model.Nakladnik</td></tr>
                                        <tr><th scope="row">ISBN</th><td>Model.Isbn</td></tr>
                                        <tr><th scope="row">Godina izdanja</th><td>Model.GodinaIzdanja</td></tr>
                                        <tr><th scope="row">Broj stranica</th><td>Model.BrojStranica</td></tr>
                                        <tr><th scope="row">Širina</th><td>Model.Sirina</td></tr>
                                        <tr><th scope="row">Visina</th><td>Model.Visina</td></tr>
                                        <tr><th scope="row">Debljina</th><td>Model.Debljina</td></tr>
                                        <tr><th scope="row">Težina</th><td>Model.Tezina</td></tr>
                                    </tbody>
                                </table>
                            </div>
                            <br />
                        </div>
                        <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
                            @Model.Description
                        </div>
                    </div>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->

        </section>
        <!-- /.content -->
    </div>

}


@using (Html.BeginForm())
{
    <h1>Proizvod</h1>
    <input type="text" readonly hidden value="@Model.Id" name="ProductId">

    @if (shoppingCart != null)
    {
        <input type="text" readonly hidden value="@shoppingCart.Id" name="ShoppingCartId">
    }

    <div>
        <h4>Detalji</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Title)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Title)
            </dd>
            <dt class="col-sm-2">
                Kategorija
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model =>  model.ProductCategory.Title)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Description)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Description)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Quantity)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Quantity)
            </dd>
            <dt class="col-sm-2">
                @Html.DisplayNameFor(model => model.Price)
            </dt>
            <dd class="col-sm-10">
                @Html.TextBoxFor(model => model.Price,new {@readonly = true, @class = "form-control readonly"})
            </dd>
            <dt class="col-sm-2">
                Dodaj količinu
            </dt>
            <dd class="col-sm-10">
                <select name="Quantity" class="form-select" aria-label="Default select example">
                    @for (int i = 1; i <= Model.Quantity; i++)
                    {
                        <option value="@i">
                            @i
                        </option>
                    }
                </select>
            </dd>
        </dl>

        <input type="submit" value="Pošalji" class="btn btn-success">
    </div>

}
